\documentclass[]{usiinfthesis}
\usepackage{lipsum}
\usepackage[draft]{fixme}
%\usepackage{setspace}
%\setstretch{1.05}

\usepackage[svgnames,table]{xcolor}
\usepackage{tikz}
\usepackage{cleveref}
\usepackage{mdframed}
\usepackage{listings}
\usepackage{inconsolata}
\usepackage{paralist}
\usepackage{enumitem}
\usepackage{tabularx}
\usepackage{pifont}
\usepackage{multirow}
\usepackage{multicol}
\usepackage{wrapfig}

\newcommand{\cmark}{\ding{51}}%
\newcommand{\xmark}{\ding{55}}%

\newcommand{\USI}{Universit\`a della Svizzera Italiana}

\usetikzlibrary{automata}
\usetikzlibrary{shapes,arrows}

\input{prelude}
\input{stats.def}


%change 'sl' to 'bf' for bold, or 'normalfont' for no special
%formatting
\captionsetup{labelfont={sl,sf}}

\lstdefinelanguage{algebra}
{morekeywords={import,sort,constructors,observers,transformers,axioms,if,
else,end},
sensitive=false,
morecomment=[l]{//s},
}

\title{When and How \lang{Java} Developers Give Up Static Type Safety} %compulsory
\subtitle{Subtitle: Reinventing the World} %optional 
\author{Luis Mastrangelo} %compulsory
\advisor{Prof. Matthias Hauswirth} %compulsory
\coadvisor{Prof. Nathaniel Nystrom} %optional
\Day{First} %compulsory
\Month{March} %compulsory
\Year{2019} %compulsory, put only the year
\place{Lugano} %compulsory
% Not used: Both Ph.D. Program Directors hard-coded in the class file.
\programDirector{Prof. Walter Binder \& Prof. Olaf Schenk} %compulsory

\committee{%
  \committeeMember{Prof. Antonio Carzaniga}{\USI, Switzerland}
  \committeeMember{Prof. Gabriele Bavota}{\USI, Switzerland}
  \committeeMember{Prof. Jan Vitek}{Northeastern University \& Czech Technical University}
  \committeeMember{Prof. Hridesh Rajan}{Iowa State University}
  %there can as many members as you like
} %the committee is compulsory

\dedication{To my beloved} %optional
\openepigraph{Someone said \dots}{Someone} %optional

\makeindex %optional, also comment out \theindex at the end

\begin{document}

\maketitle %generates the titlepage, this is FIXED

\frontmatter %generates the frontmatter, this is FIXED

\input{abstract}

\begin{abstract}[Zusammenfassung]
optional, use only if your external advisor requires it in his/er
language 
\\

\lipsum
\end{abstract}

\begin{acknowledgements}
\lipsum 
\end{acknowledgements}

\tableofcontents 
\listoffigures %optional
\listoftables %optional

\mainmatter

\chapter{Introduction}
\lipsum[1-4]
\section{Let's start!}

\lipsum



\chapter[Short title]{A chapter title which will run over two lines --- it's for
  testing purpose}

\lipsum[1-2]

\section{The first \textsc{Section}}

Here is some text with \textsc{SmallCaps} in normal font.

\lipsum[3-4]

 \section{The second, math section}
\begin{center}
  \begin{tikzpicture}[shorten >=1pt,node distance=2cm,auto, initial text=, >=stealth] 
    \node[state, initial] (q0) {$q_0$};
    \node[state] (q1) [right of=q0] {$q_1$};
    \node[state] (q2) [right of=q1] {$q_2$};
    \node[state, accepting] (q3) [right of=q2] {$q_3$};
    \path[->]
    (q0) 
    edge [loop above] node {0,1} ()
    edge  node {0} (q1)
    (q1)
    edge  node {1} (q2)
    (q2)
    edge node {0} (q3)
    (q3)
    edge [loop above] node {0,1} ()
;
  \end{tikzpicture}
\end{center}

\textbf{Theorem 1 (Residue Theorem).}
Let $f$ be analytic in the region $G$ except for the isolated singularities $a_1,a_2,\ldots,a_m$. If $\gamma$ is a closed rectifiable curve in $G$ which does not pass through any of the points $a_k$ and if $\gamma\approx 0$ in $G$ then
\[
\frac{1}{2\pi i}\int_\gamma f = \sum_{k=1}^m n(\gamma;a_k) \text{Res}(f;a_k).
\]
\textbf{Theorem 2 (Maximum Modulus).}
\emph{Let $G$ be a bounded open set in $\mathbb{C}$ and suppose that $f$ is a continuous function on $G^-$ which is analytic in $G$. Then}
\[
\max\{|f(z)|:z\in G^-\}=\max \{|f(z)|:z\in \partial G \}.
\]

\section[third]{A very very long section, titled ``The third section'', with
  a rather  short text alternative (third)}
\lipsum \texttt{Some Test}
\lstset{language=algebra,linewidth=0.95\linewidth,breaklines=true,numbers=left,
basicstyle=\ttfamily,numberstyle=\tiny,escapeinside={//*}{\^^M},
mathescape=true}
\begin{lstlisting}
import IntSpec, ItemSpec;

sort cart; //*\label{sort}

constructors //*\label{begin-sig}
create() $\longrightarrow$ cart;
insert(cart, item) $\longrightarrow$ cart;
observers
amount(cart) $\longrightarrow$ int;
transformers
delete(cart, item) $\longrightarrow$ cart; //*\label{end-sig}

axioms //*\label{begin-axioms}
forall c: cart, i, j: item 

amount(create()) $=$ 0; //*\label{begin-amount}
amount(insert(c,i)) $=$ amount(c) $+$ price(i); //*\label{end-amount}
delete(create(),i) $=$ create(); //*\label{begin-delete}
delete(insert(c,i),j) $=$
if (i =$\:$= j) c
else insert(delete(c,j),i); //*\label{end-axioms}
end
\end{lstlisting}

As you can easily see from the above listing \citet{bbggs:iet07}
define something weird based on the BPEL specification
\citep{bpelspec}.

% shows all citations. Nope.
% \nocite{*}

\input{cha-introduction}
\input{cha-literaturereview}
\input{cha-unsafe}
\input{cha-casts}
\input{cha-conclusions}
\input{cha-othercontributions}

\appendix %optional, use only if you have an appendix

\chapter{Some retarded material}
\section{It's over\dots}
\lipsum 

\backmatter

\chapter{Glossary} %optional

%\bibliographystyle{alpha}
%\bibliographystyle{dcu}
\bibliographystyle{plainnat}
\bibliography{pubs}

\cleardoublepage
\theindex %optional, use only if you have an index, must use
	  %\makeindex in the preamble
\lipsum

\end{document}
