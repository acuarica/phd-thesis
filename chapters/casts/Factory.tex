\begin{pattern}{Factory}
\todo{Also Logger}
Creates an object based on some arguments either to the method call or constructor.
Since the arguments are known at compile-time, cast to the specific type.

\todo{Nate: Move to "Related Patterns"}
Cast factory method result to subtype (special case of family polymorphism).
Usually Logger.getLogger.

The method is declared to return URLConnection but can return a more specific type based on the URL string.
Cast to that.
We should generalize this pattern.
%
\todo{Nate: Create with type descriptor "Tag"}

\instances{}
\todo{Describe}
\footnote{\url{http://bit.ly/connect2id_oauth-2-0-sdk-with-_2HvRlUX}}

\footnote{\url{https://docs.oracle.com/javase/8/docs/api/java/security/KeyPair.html\#getPrivate()}}

%https://lgtm.com/projects/b/connect2id/oauth-2.0-sdk-with-openid-connect-extensions/snapshot/dist-1311020143-1524814812150/files/src/test/java/com/nimbusds/oauth2/sdk/jose/jwk/RemoteJWKSetTest.java?sort=name&dir=ASC&mode=heatmap#L242
\begin{minted}[highlightlines=10]{java}
KeyPairGenerator pairGen = KeyPairGenerator.getInstance("RSA");
pairGen.initialize(1024);
KeyPair keyPair = pairGen.generateKeyPair();
RSAKey rsaJWK1 = new RSAKey.Builder((RSAPublicKey) keyPair.getPublic())
        .privateKey((RSAPrivateKey) keyPair.getPrivate())
        .keyID("1")
        .build();
keyPair = pairGen.generateKeyPair();
RSAKey rsaJWK2 = new RSAKey.Builder((RSAPublicKey) keyPair.getPublic())
        .privateKey((RSAPrivateKey) keyPair.getPrivate())
        .keyID("2")
        .build();
\end{minted}

\done{Also URLOpenConnection.}
\footnote{\url{http://bit.ly/apache_hadoop_2E6KY6T}}

\footnote{\url{https://docs.oracle.com/javase/8/docs/api/java/net/URL.html\#openConnection--}}

%https://lgtm.com/projects/g/apache/hadoop/snapshot/dist-956730001-1524814812150/files/hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-resourcemanager/src/test/java/org/apache/hadoop/yarn/server/resourcemanager/webapp/TestRMWebServicesHttpStaticUserPermissions.java?sort=name&dir=ASC&mode=heatmap#L138
\begin{minted}[highlightlines=2]{java}
URL url = new URL("http://localhost:8088/ws/v1/cluster/apps");
HttpURLConnection conn = (HttpURLConnection) url.openConnection();
\end{minted}

\done{Luis: Get bitly link}
\footnote{\url{http://bit.ly/bcgit_bc-java_2TEVScM}}

%https://lgtm.com/projects/g/bcgit/bc-java/snapshot/dist-20740003-1524814812150/files/prov/src/test/java/org/bouncycastle/jce/provider/test/X509LDAPCertStoreTest.java?sort=name&dir=ASC&mode=heatmap#L241
\begin{minted}[highlightlines=1]{java}
CertStore cs = CertStore.getInstance("X509LDAP", params1, "BC");
X509CertSelector sl = new X509CertSelector();
CertificateFactory cf = CertificateFactory.getInstance("X.509", "BC");
X509Certificate xcert = (X509Certificate)cf.generateCertificate(new ByteArrayInputStream(cert1));
sl.setCertificate(xcert);
Collection coll = cs.getCertificates(sl);
if (coll.isEmpty() || !coll.iterator().next().equals(xcert)) {
fail("certificate could not be picked from LDAP directory.");
}
// System.out.println(coll.toArray()[0]);
sl.setCertificate(null);
sl.setSubject(getSubject(xcert).getEncoded());
coll = cs.getCertificates(sl);
if (coll.isEmpty() || !coll.iterator().next().equals(xcert)) {
        fail("certificate could not be picked from LDAP directory.");
}
X509CRLSelector sl2 = new X509CRLSelector();
X509CRL crl = (X509CRL)cf.generateCRL(new ByteArrayInputStream(directCRL));
\end{minted}


\footnote{\url{http://bit.ly/JSQLParser_JSqlParser_2TecMyB}}
the \code{parserManager.parse} method returns a value of type \code{Statement}.

%https://lgtm.com/projects/g/JSQLParser/JSqlParser/snapshot/dist-43250114-1524814812150/files/src/test/java/net/sf/jsqlparser/test/select/SelectTest.java?sort=name&dir=ASC&mode=heatmap#L437
\begin{minted}[highlightlines=2]{java}
statement = "SELECT * FROM mytable WHERE mytable.col = 9 LIMIT :param_name";
select = (Select) parserManager.parse(new StringReader(statement));

public class Select implements Statement {
        // [...]
}
\end{minted}


\detection{}

\discussion{}

\related{}

\end{pattern}