\begin{pattern}{AccessSuperclassField}
Perform an upcast to access a field of a superclass of the cast operand.

\instances{}
\footnote{\url{http://bit.ly/FenixEdu_fenixedu-academic_2SQxlkC}}

%https://lgtm.com/projects/g/FenixEdu/fenixedu-academic/snapshot/dist-29270029-1524814812150/files/target/generated-test-sources/dml-maven-plugin/org/fenixedu/academic/domain/residence/StudentsPerformanceReport_Base.java?sort=name&dir=ASC&mode=heatmap#L12
\begin{minted}[highlightlines=4]{java}
public abstract class StudentsPerformanceReport_Base extends QueueJobWithFile {
    // [...]
    public ExecutionSemester getValue(StudentsPerformanceReport o1) {
        return ((StudentsPerformanceReport_Base)o1).executionSemester.get();
    }
    private OwnedVBox<ExecutionSemester> executionSemester;
}
 
public class StudentsPerformanceReport extends StudentsPerformanceReport_Base { /* [...] */ }
\end{minted}

\discussion{}
The particular instance we encountered has a method whose parameter is a
  subclass of the current class. The cast is needed to access a private
  field of the current class.
  Being an upcast, the cast is always safe. More problematic is the strong coupling 
  between the base class and the derived class, however the base class is
  generated code; possibly, a manually written version would just combine the
  two classes.

  Another use of the pattern, not found in our sample however,
  is to upcast a value to access a field of a superclass 
  which is shadowed by another field of the same name in the subclass.

  The \nameref{pat:ReflectiveAccessibility} pattern is also used to access
  private fields, albeit fields of unrelated classes that cannot be accessed
  simply by casting to another type.
  Like \nameref{pat:SoleSubclassImplementation}, this pattern occurs
  when there is high cohesion between super and subclass.

\end{pattern}
