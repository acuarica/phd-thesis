\begin{pattern}{ReflectiveAccessibility}
This pattern accesses a field of an object by means of reflection.
Typically reflection is used because the field is private and therefore
inaccessible at compile time and the developer cannot change the field
declaration itself.
In this case, the method \code{Field::setAccessible(true)} is invoked on the field
before getting the value of the field.
The cast is needed because \code{Field::get} returns an \code{Object}.

\instances{}
The following cast%
\def\urlvar{http://bit.ly/loopj_android_async_http_2SOISRr}
uses this pattern:

%https://lgtm.com/projects/g/loopj/android-async-http/snapshot/dist-1879340034-1529316783166/files/library/src/main/java/com/loopj/android/http/AsyncHttpClient.java?sort=name&dir=ASC&mode=heatmap&showExcluded=false#L445
\begin{minted}[highlightlines=2]{java}
f.setAccessible(true);
HttpEntity wrapped = (HttpEntity) f.get(entity);
\end{minted}


\def\urlvar{http://bit.ly/joel_costigliola_assertj_db_2Ip1Rho}

%https://lgtm.com/projects/g/joel-costigliola/assertj-db/snapshot/dist-890344-1524814812150/files/src/test/java/org/assertj/db/navigation/ToChange_ChangeOfModification_Integer_Test.java?sort=name&dir=ASC&mode=heatmap#L199
\begin{minted}[highlightlines=4]{java}
Field fieldPosition = ChangesOutputter.class.getDeclaredField("changesPosition");
fieldPosition.setAccessible(true);
ChangesOutputter changesDisplayBis = output(changes);
PositionWithChanges<ChangesAssert, ChangeAssert> positionBis = 
            (PositionWithChanges) fieldPosition.get(changesDisplayBis);
\end{minted}


\discussion{}
Using reflection to access a field is a common workaround to tight access
  control restrictions. However, it should generally be regarded as a code
  smell.

As with \nameref{pat:Deserialization}, this pattern is necessary because
a library method can return values of many different types at run time,
and so is declared to return \code{Object}.


\end{pattern}
